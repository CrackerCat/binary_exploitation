undefined8 main(int param_1,undefined8 *param_2)

{
  int iVar1;
  char *pcVar2;
  long in_FS_OFFSET;
  stat local_a8;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_1 < 1) {
                    /* WARNING: Subroutine does not return */
    __assert_fail("argc > 0","<stdin>",0x14,(char *)&__PRETTY_FUNCTION__.4629);
  }
  puts("###");
  printf("### Welcome to %s!\n",*param_2);
  puts("###");
  if (param_1 < 2) {
                    /* WARNING: Subroutine does not return */
    __assert_fail("argc > 1","<stdin>",0x1a,(char *)&__PRETTY_FUNCTION__.4629);
  }
  pcVar2 = strstr((char *)param_2[1],"flag");
  if (pcVar2 != (char *)0x0) {
    puts("Error: path contains flag!");
                    /* WARNING: Subroutine does not return */
    exit(1);
  }
  iVar1 = lstat((char *)param_2[1],&local_a8);
  if (iVar1 == -1) {
    puts("Error: failed to get file status!");
                    /* WARNING: Subroutine does not return */
    exit(1);
  }
  if ((local_a8.st_mode & 0xf000) == 0xa000) {
    puts("Error: file is a symlink!");
                    /* WARNING: Subroutine does not return */
    exit(1);
  }
  usleep(10000);
  iVar1 = open((char *)param_2[1],0);
  sendfile(1,iVar1,(off_t *)0x0,0x400);
  if (local_10 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return 0;
}
